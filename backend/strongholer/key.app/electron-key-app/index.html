<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Electron Key </title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }

    pre {
      background: #f5f5f5;
      padding: 12px;
      border-radius: 8px;
      overflow-x: auto;
    }

    .ok {
      color: green;
      font-weight: bold;
    }
  </style>
</head>

<body>
  <h1>Electron API Key Receiver</h1>
  <p>API locale: <b>http://127.0.0.1:3000/api/tunnel-key</b></p>
  <p class="ok" id="status">En attente de clé...</p>
  <h2>Dernière clé reçue</h2>
  <pre id="out">(rien)</pre>

  <script>
    const statusEl = document.getElementById("status");
    const outEl = document.getElementById("out");

    function render(data) {
      if (!data) return;
      statusEl.textContent = "Good marco";
      outEl.textContent = JSON.stringify(data, null, 2);
    }

    window.api.getLastKey().then(render);
    window.api.onKeyReceived(render);
  </script>
</body>

</html>